version: '3.9'

services:
  gitlab:
    image: gitlab/gitlab-ce:latest
    container_name: gitlab
    restart: always
    hostname: gitlab.local
    ports:
      - "8080:80"       # UI GitLaba na http://localhost:8080
      - "8443:443"      # HTTPS (self-signed cert w dev)
      - "2222:22"       # SSH dostÄ™p do GitLaba
    environment:
      GITLAB_OMNIBUS_CONFIG: |
        external_url 'http://gitlab.local:8080'
        gitlab_rails['gitlab_shell_ssh_port'] = 2222
        # MoÅ¼esz dodaÄ‡ konfiguracjÄ™ SMTP, HTTPS, registry itp.
    volumes:
      # ğŸ”¹ WERSJA DEWELOPERSKA â†’ Å‚atwy dostÄ™p do plikÃ³w
      # - ./gitlab/config:/etc/gitlab
      # - ./gitlab/logs:/var/log/gitlab
      # - ./gitlab/data:/var/opt/gitlab
      # ğŸ”¹ Aby uÅ¼yÄ‡ WOLUMENÃ“W Dockera zamiast lokalnych katalogÃ³w, zamieÅ„ powyÅ¼sze na:
      - gitlab-config:/etc/gitlab
      - gitlab-logs:/var/log/gitlab
      - gitlab-data:/var/opt/gitlab
    shm_size: '256m'  # ZwiÄ™kszona pamiÄ™Ä‡ wspÃ³Å‚dzielona

# ğŸ”¹ Definicje wolumenÃ³w (jeÅ›li zdecydujesz siÄ™ uÅ¼yÄ‡ Docker volumes)
volumes:
  gitlab-config:
  gitlab-logs:
  gitlab-data:
